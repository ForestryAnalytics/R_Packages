Package ‘forestmangr’
October 26, 2018
Type Package
Version 0.9.0
Title Functions for Forest Mensuration and Management
#### Description Set of functions for processing forest inventory data with methods such as simple random
sampling, stratified random sampling and systematic sampling. There are also functions
for yield and growth predictions and model fitting, linear and non linear grouped data fitting
functions, and statistical tests.
Author Sollano Rabelo Braga [aut, cre, cph],
Marcio Leles Romarco de Oliveira [aut],
Eric Bastos Gorgens [aut]
Maintainer Sollano Rabelo Braga <sollanorb@gmail.com>
Depends R(>= 3.3)
Imports dplyr(>= 0.7.0), ggplot2(>= 2.0), ggthemes, tidyr, broom,
scales(>= 0.4.1), psych, purrr, plyr, tibble, systemfit,
htmltools, ggpmisc, rlang, graphics, utils, covr, rmarkdown,
curl, car, stats, methods,magrittr,minpack.lm
Suggests
Date 2018-10-15
Encoding UTF-8
License GPL-2
RoxygenNote 6.1.0
NeedsCompilation no
Repository CRAN
Date/Publication 2018-10-26 14:30:05 UTC
R topics documented:
average_tree_curve . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3
bdq_meyer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4
bias_per . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5
1
2 R topics documented:
check_names . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
classify_site . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
diameter_class . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
dom_height . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
est_clutter . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11
exfm1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
exfm10 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14
exfm11 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
exfm12 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
exfm13 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
exfm14 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
exfm15 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
exfm16 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
exfm17 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
exfm18 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
exfm19 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
exfm2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
exfm20 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
exfm21 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22
exfm3 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
exfm4 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
exfm5 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
exfm6 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
exfm7 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26
exfm8 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
exfm9 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
fit_clutter . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28
forest_structure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
Graybill_F . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31
guide_curve . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32
huberwb . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34
huberwob . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35
ident_model . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37
inv . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
lm_table . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40
nls_table . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42
plot_summarise . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45
pow . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47
resid_plot . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48
rmse_per . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49
round_df . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51
similarity_matrix . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52
smalianwb . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53
smalianwob . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
species_aggreg . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56
species_diversity . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57
sprs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 58
ss_diffs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60
average_tree_curve 3
strs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62
tree_summarise . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64
vertical_stratum . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65
vol_summarise . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66
%>% . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67
%T>% . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67
Index 68
average_tree_curve Generate the curve of a forest’s average tree using the Kozak taper
model
#### Description
Generate a ggplot curve of a forest’s average tree using the Kozak taper model (Kozak, Munro and
Smith, 1969).
#### Usage
average_tree_curve(df, d, dbh, h, th, facet = NA)
#### Arguments 
*``df``: A data frame.
d Quoted name of the section diameter variable, in cm.
* ``dbh``: Quoted nameof the diameter at breast height variable, in cm.
h Quoted name of the section height variable, in meters.
th Quoted name of the total height variable, in meters.
facet Optional argument. If supplied with the Quoted name of a factor variable(s),
this variable is used to divide the plot into facets. Default: NA.
Value
A ggplot object.
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
#### References
Kozak, A., Munro, D. D. and Smith, J. H. G. (1969) Taper Functions and their Application in Forest
Inventory, The Forestry Chronicle, 45, pp. 278–283.
4 bdq_meyer
#### Examples
library(forestmangr)
data("exfm7")
head(exfm7)
average_tree_curve(df = exfm7, d = "di_wb", dbh = "DBH", h = "hi", th = "TH")
average_tree_curve(df = exfm7, d = "di_wb", dbh = "DBH", h = "hi", th = "TH", facet = "STRATA")
bdq_meyer Classify a forest for selective cutting using the Meyer BDq method
#### Description
This function can be used to plan and execute selective cuttings of a native forest, without damaging
the forest’s natural structure.
#### Usage
bdq_meyer(df, plot, dbh, plot_area, class_interval = 5, dbh_min = 5,
licourt_index = 2, output = "table")
#### Arguments 
*``df``: A data frame.
* `` plot``:  Quoted name of the plot variable. used to differentiate the plot’s trees, and calculate the number of sampled plots.
* ``dbh``: Quoted nameof the diameter at breast height variable, in cm.
* `` plot_area``:  Quoted name of the plot area variable, or a numeric vector with the plot area
value. The plot area value must be in square meters.
*``class_interval``:  Numeric value for the class interval used to classify the data. Default: 5.
dbh_min Numeric value for minimum diameter value to be considered in the classifications.
dbh values smaller than this will be dismissed from the classification.
Default: 5.
* `` licourt_index``: Numeric value for the start licourt index used. Default: 2.
output Character value for the desired output. Can be either "table" for the classified
data table, "model" to get a lm object with the linear model fitted, "coefs" to
get a vector with the Meyer coefficients, or "all", to get a list with all restuls.
Default: "table".
Value
a data frame, a lm object, a vector or a list, according to the output argument.
bias_per 5
Author(s)
Eric Bastos Gorgens <e.gorgens@gmail.com>
#### References
Souza, A. L. and Soares, C. P. B. (2013) Florestas Nativas: estrutura, dinamica e manejo. Vicosa:
UFV.
#### Examples

```{r}
library(forestmangr)
data(exfm20)

# To get the table with the regulated forest:
bdq_meyer(exfm20, "transect", "dbh", 1000)

# Use different class interval values to get different results:
bdq_meyer(exfm20, "transect", "dbh", 1000, class_interval = 10)

# It's possible to get different outputs:
bdq_meyer(exfm20, "transect", "dbh", 1000, output="model")
bdq_meyer(exfm20, "transect", "dbh", 1000, output="coefs")
bdq_meyer(exfm20, "transect", "dbh", 1000, output="all")
```

bias_per Bias of an estimator in percentage
#### Description
Function for calculating the bias of an estimator.
#### Usage
bias_per(df, y, yhat)
#### Arguments 
*``df``: A data frame.
y Quoted name of the variable representing the observed values in the data frame.
If a data frame is not provided, y can also be a numeric vector.
yhat Quoted name of the variable representing the estimated values in the data frame.
If a data frame is not provided, yhat can also be a numeric vector.
#### Details
Function for calculating the bias of an estimator, given the observed values, and the estimated
values.
6 check_names
Value
Numeric vector with the bias value, in percentage.
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
See Also
other statistics to evaluate estimators: rmse_per for the Root mean square error of an estimator

#### Examples
```{r}
library(forestmangr)
data(exfm11)
head(exfm11)
# Bias of an estimator, given the data frame and quoted variable names:
bias_per(exfm11, "TH", "TH_EST3")
# Bias of an estimator, given the vectors for observed and estimated values:
bias_per(y = exfm11$TH, yhat = exfm11$TH_EST3)
```
check_names Check if character vector contains variable names
#### Description
Function used to check if a string, or a character vector contains variable names of a given data
frame.
#### Usage
check_names(df, var_names, boolean = TRUE)
#### Arguments 
*``df``: A data frame.
* ``var_names ``: Character vector to be compared with the data frame names.
boolean Boolean object used to define if the output is going to be a boolean object TRUE
, or a string FALSE. Default: TRUE.
#### Details
Function used to check if a string, or a character vector contains variable names of a given data
frame. This functions is mainly used to error-proof other functions of this package,
classify_site 7
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
#### Examples
```{r}
library(forestmangr)
check_names(iris, "Species")
check_names(iris, "Species", boolean = FALSE )
check_names(iris, c("Especies", "Setal.Width") )
check_names(iris, c("Especies", "Setal.Width"), boolean = FALSE)
```




exfm10 Inventory data of an eucalyptus forest Brazil with dominant height
variable
#### Description
In this data, each observation is a tree.
#### Usage
data(exfm10)
#### Format
A data frame with 900 observations and 14 variables:
* `` MAP ``: map numbers
PROJECT project number
* ``STRATA``: stratum number
* ``GENCODE``: genetic code of plots
* ``STRATA_AREA``:   area of each strata, in hectares
* `` PLANTING_DATE``:  date of planting
SPACING Spacing used in the plots, in meters
* ``PLOT``: plot number
MEASUREMENT_DATE date of measurement
PLOT_AREA area of plots, in square meters
PIT pit number
* ``dbh``: diameter at breast height, in meters
* ``TH``:  total height, in meters
OBS quality of trees, N = normal tree, D = dominant tree, F = a failure, or dead tree
* `` DH``: dominant height, in meters
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
exfm11 15
exfm11 Observed and estimated values of height of trees, using 3 different
models
#### Description
In this data, each observation is a tree.
#### Usage
data(exfm11)
#### Format
A data frame with 199 observations and 6 variables:
* ``STRATA``: stratum number
* ``PLOT``: plot number
* ``TH``:  total height, in meters
TH_EST1 total estimated height with model 1, in meters
TH_EST2 total estimated height with model 2, in meters
TH_EST3 total estimated height with model 3, in meters
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
exfm12 Inventory data of an eucalyptus forest in Brazil, with age and site variables
#### Description
In this data, each observation is a plot. The site was estimated using the Chapman & Richards
model.
#### Usage
data(exfm12)
16 exfm13
#### Format
A data frame with 139 observations and 8 variables:
* ``STRATA``: stratum number
* ``PLOT``: plot number
* ``age ``: average age of plots, in months
* `` DH``: dominant height, in meters
N number of individuals
V volume of trees, in cubic meters
B basal area, in square meters
S site variable, in meters
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
exfm13 Experimental data on nitrogen effect in species fertilizing
#### Description
In this data, each observation is a tree.
#### Usage
data(exfm13)
#### Format
A data frame with 36 observations and 7 variables:
species species common name
trat treatment number
esp species number
N quantity of nitrogen used, in grams
N2 squared quantity of nitrogen used, in squared grams
block block number
* ``dbh``: diameter at breast height, in meters
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
exfm14 17
exfm14 Inventory data of an eucalyptus forest in Brazil, with age and dominant
height variables
#### Description
In this data, each observation is a plot.
#### Usage
data(exfm14)
#### Format
A data frame with 859 observations and 4 variables:
* ``STRATA``: stratum number
* ``PLOT``: plot number
* ``age ``: average age of plots, in months
* `` DH``: dominant height, in meters
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>

exfm16 Inventory data of an eucalyptus forest in Brazil, with age variable
#### Description
In this data, each observation is a plot.
#### Usage
<pre><code>
data(exfm16)
</code></pre>

#### Format
A data frame with 139 observations and 8 variables:
* ``STRATA``: stratum number
* ``PLOT``: plot number
* ``age ``: average age of plots, in months
* `` DH``: dominant height, in meters
N number of individuals
V volume of trees, in cubic meters
B basal area, in square meters
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
exfm17 Inventory data of an eucalyptus forest in Brazil, with age and site variables
#### Description
In this data, each observation is a plot. The site was estimated using the Schumacher model.
#### Usage
data(exfm17)
exfm18 19
#### Format
A data frame with 139 observations and 8 variables:
* ``STRATA``: stratum number
* ``PLOT``: plot number
* ``age ``: average age of plots, in months
* `` DH``: dominant height, in meters
N number of individuals
V volume of trees, in cubic meters
B basal area, in square meters
S site variable, in meters
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
exfm18 Experimental data on nitrogen effect in species fertilizing
#### Description
In this data, each observation is a tree.
#### Usage
data(exfm18)
#### Format
A data frame with 877 observations and 6 variables:
* ``PLOT``: plot number
Species species scientific name
* ``tree``:  tree number
Trunk trunk number
CBH circumference at breast height, in meters
* ``dbh``: diameter at breast height, in meters
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
20 exfm19
exfm19 Data of felled trees sections, measured in the Smalian method
#### Description
In this data, each observation is a section of a tree.
#### Usage
data(exfm19)
#### Format
A data frame with 16 observations and 3393 variables:
* `` MAP ``: map numbers
PROJECT name of project
SPACING Spacing used in the plots, in meters
* ``STRATA``: stratum number
* ``GENCODE``: genetic code of plots
TREE number of trees
* ``dbh``: diameter at breast height, in meters
* ``TH``:  total height, in meters
hi height of sections, in meters
di_wb diameter of sections with bark, in centimeters
bark_t bark of thickness, in millimeters
* ``CSA_WB``:  cross section area with bark, in square meters
VWB volume with bark, in cubic meters
di_sc diameter of sections without bark, in centimeters
CSA_WOB cross section area without bark, in square meters
VWOB volume without bark, in cubic meters
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
exfm2 21
exfm2 Stratified random inventory definite data
#### Description
In this data, each observation is a plot.
#### Usage
data(exfm2)
#### Format
A data frame with 57 observations and 4 variables:
* ``STRATA``: stratum number
* ``STRATA_AREA``:   area of each strata, in hectares
PLOT_AREA area of plots, in square meters
VWB volume with bark, in cubic meters
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
#### Source
Soares, C. P. B., Paula Neto, F. and Souza, A. L. (2012) Dendrometria e Inventario Florestal. 2nd
ed. Vicosa: UFV.
exfm20 Inventory data of a natural forest in Brazil
#### Description
In this data, each observation is a tree.
#### Usage
data(exfm20)
22 exfm21
#### Format
A data frame with 12295 observations and 18 variables:
cod area code
transect plot number
* ``tree``:  tree number
common.name species common name
scientific.name species scientific name
family species family name
* ``dbh``: diameter at breast height, in meters
canopy.pos canopy position
light level of light received by the tree
dead tells if the tree is dead or not
Hcom commercial height, in meters
Htot total height, in meters
date date of measurement
utm.east utm east position value
utm.north utm north position value
vol volume of trees, in cubic meters
plot.area plot area, in square meters
total.area total area, in hectares
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>



exfm4 Simple random inventory definite data
#### Description
In this data, each observation is a plot.
#### Usage
data(exfm4)
#### Format
A data frame with 25 observations and 3 variables:
TOTAL_AREA total area, in hectares
PLOT_AREA area of plots, in square meters
VWB volume with bark, in cubic meters
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
#### Source
Soares, C. P. B., Paula Neto, F. and Souza, A. L. (2012) Dendrometria e Inventario Florestal. 2nd
ed. Vicosa: UFV.
exfm5 Systematic inventory data
#### Description
In this data, each observation is a plot.
#### Usage
data(exfm5)
exfm6 25
#### Format
A data frame with 18 observations and 3 variables:
TOTAL_AREA total area, in hectares
PLOT_AREA area of plots, in square meters
VWB volume with bark, in cubic meters
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
#### Source
Soares, C. P. B., Paula Neto, F. and Souza, A. L. (2012) Dendrometria e Inventario Florestal. 2nd
ed. Vicosa: UFV.


exfm6 Stratified random inventory definite data 2
#### Description
In this data, each observation is a plot.
#### Usage
data(exfm6)
#### Format
A data frame with 10 observations and 14 variables:
* ``GENCODE``: genetic code of plots
* `` MAP ``: map numbers
* ``STRATA``: stratum number
* ``PLOT``: plot number
* ``age ``: average age of plots, in months
* ``STRATA_AREA``:   area of each strata, in hectares
PLOT_AREA area of plots, in square meters
* ``dbh``: diameter at breast height, in meters
q quadratic diameter, in meters
* ``TH``:  total height, in meters
* `` DH``: dominant height, in meters
G basal area, in square meters
VWB volume with bark, in cubic meters
VWOB volume without bark, in cubic meters
26 exfm7
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
exfm7 Data of felled trees sections, measured in the Smalian method
#### Description
In this data, each observation is a section of a tree.
#### Usage
data(exfm7)
#### Format
A data frame with 11 observations and 3393 variables:
* `` MAP ``: map numbers
PROJECT name of project
SPACING Spacing used in the plots, in meters
* ``STRATA``: stratum number
* ``GENCODE``: genetic code of plots
TREE number of trees
* ``dbh``: diameter at breast height, in meters
* ``TH``:  total height, in meters
hi height of sections, in meters
di_wb diameter of sections with bark, in centimeters
bark_t bark of thickness, in millimeters
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>



exfm9 Inventory data of an eucalyptus forest in minas gerais, Brazil
#### Description
In this data, each observation is a tree.
#### Usage
data(exfm9)
28 fit_clutter
#### Format
A data frame with 900 observations and 14 variables:
* `` MAP ``: map numbers
PROJECT project number
* ``STRATA``: stratum number
* ``GENCODE``: genetic code of plots
* ``STRATA_AREA``:   area of each strata, in hectares
* `` PLANTING_DATE``:  date of planting
SPACING Spacing used in the plots, in meters
* ``PLOT``: plot number
MEASUREMENT_DATE date of measurement
PLOT_AREA area of plots, in square meters
PIT pit number
* ``dbh``: diameter at breast height, in meters
* ``TH``:  total height, in meters
OBS quality of trees, N = normal tree, D = dominant tree, F = a failure, or dead tree
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
fit_clutter Fit the Clutter model for growth and yield
#### Description
Fit the Clutter model for growth and yield using the two stage least squares method (2SLS).
#### Usage
fit_clutter(df, age, dh, basal_area, volume, site, plot, .groups = NA,
model = "full", keep_model = FALSE)
#### Arguments 
*``df``: A data frame.
age Quoted name for the age variable.
dh Quoted name for the dominant height variable.
* ``basal_area``: Quoted name for the basal area variable.
volume Quoted name for the volume area variable.
* `` site``: Quoted name for the site variable.
fit_clutter 29
* `` plot``:  Quoted name for the plot variable.
* ``.groups``: Optional argument. Quoted name(s) of grouping variables used to fit multiple
regressions, one for each level of the provided variable(s). Default NA.
model Character variable for the type of the model fitted. If "full", the full model
will be used. if "mod", a modified model will be fitted, where the X3 variable is
excluded from the regression. Default: full.
keep_model If TRUE a variable with the regression model will be kept in the data frame.
Default: FALSE.
Value
A data frame with the regressions coefficients.
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
#### References
Clutter, J. L. (1963) Compatible Growth For Loblolly by the Southeastern, Forest Science, 9(3), pp.
354–371. Sullivan, A. D. and Clutter, J. L. (1972) A Simultaneous Growth and Yield for Loblolly
Pine, Forest Science, 18(1), pp. 76–86. Campos, J. C. C. and Leite, H. G. (2017) Mensuracao
Florestal: Perguntas e Respostas. 5a. Vicosa: UFV.
See Also
other sampling functions: est_clutter for estimating the Clutter Growth and Yield model variables,
and classify_site for classifying data according to site.
#### Examples
```{r}
library(forestmangr)
data("exfm17")
head(exfm17)
# To fit the Clutter model we just need to define the data, and age, dominant height,
# basal area, volume, site and plot variables:
fit_clutter(exfm17, "age", "DH", "B", "V", "S", "plot")
# To fit the alternate model (without a1) just use model="mod":
fit_clutter(exfm17, "age", "DH", "B", "V", "S", "plot",model="mod")
# To keep the regression model, use keep_model=TRUE:
fit_clutter(exfm17, "age", "DH", "B", "V", "S", "plot", keep_model=TRUE)
```

forest_structure Get the forest horizontal, vertical and internal structure
#### Description
This function calculates the horizontal structure of a given forest inventory data, with information
like absolute frequency, relative frequency, absolute density, relative density, absolute dominance,
relative dominance, importance value index, and coverage value index. If additional variables are
supplied, the vertical and internal structures are also provided.
#### Usage
forest_structure(df, species, dbh, plot, plot_area, vertical_est = NA,
internal_est = NA, NI_label = "")
#### Arguments 
*``df``: A data frame.
species Quoted name of the scientific names variable, or any variable used to differentiate
the different species found in data.
* ``dbh``: Quoted nameof the diameter at breast height variable, in cm.
* ``plot``:  Quoted name of the plot variable. used to differentiate the plot’s trees, and
calculate the number of sampled plots.
* `` plot_area``:  Quoted name of the plot area variable, or a numeric vector with the plot area
value. The plot area value must be in square meters.
vertical_est Optional argument. Quoted name of the vertical strata variable, or the height
variable. If this is a factor variable, it’s levels will be used to classify the forest vertically. If it’s a height variable, the vertical strata will be created based on it’s
mean and standard deviation values. Default: NA.
internal_est Optional argument. Quoted name of the internal strata variable. Default: NA.
NI_label Label used for Species not identified. This parameter works along with species.
The level supplied here will not be considered in the classification. Default "".
Value
a data frame with the forest’s structure.
Author(s)
Eric Bastos Gorgens <e.gorgens@gmail.com>
#### References
Souza, A. L. and Soares, C. P. B. (2013) Florestas Nativas: estrutura, dinamica e manejo. Vicosa:
UFV.
Graybill_F 31
#### Examples
library(forestmangr)
data(exfm20)
# Get the forest's horizontal structure:
forest_structure(exfm20, "scientific.name", "dbh", "transect", 10000)
# area plot as a variable name:
forest_structure(exfm20, "scientific.name", "dbh", "transect", "plot.area")
# Get the forest's horizontal and vertical structure.
# The vertical structure variable can either be the height variable,
# or a factor variable with the horizontal strata:
forest_structure(exfm20, "scientific.name", "dbh", "transect", 10000, "canopy.pos")
# Get the forest's horizontal, vertical and internal structure:
forest_structure(exfm20, "scientific.name", "dbh", "transect", 10000, "canopy.pos", "light")

guide_curve Get the guide curve plot for growth and yield analysis of inventory
data
#### Description
Get the guide curve for growth and yield analysis of inventory data using the factor method, and
different statistical models.
guide_curve 33
#### Usage
guide_curve(df, dh, age, age_index, n_class = 4, model = "Schumacher",
start_chap = c(b0 = 23, b1 = 0.03, b2 = 1.3), start_bailey = c(b0 =
3, b1 = -130, b2 = 1.5), round_classes = FALSE, font = "serif",
gray_scale = TRUE, output = "plot")
#### Arguments 
*``df``: A data frame.
dh Quoted name for the dominant height variable.
age Quoted name for the age variable.
age_index Numeric value for the age index.
n_class Numeric value for the number of classes used to divide the data. Default 4.
model model used to fit dh as a function of age. The models available are "Schumacher",
"Curtis", "Chapman-Richards" and "Bailey-Clutter". Default: "Schumacher".
* start_chap Numeric vector with the start values for the Chapman-Richards model. This
must be a named vector, with b0, b1 and b2 as parameter names. Default:
c(b0=23, b1=0.03, b2 = 1.3).
* start_bailey Numeric vector with the start values for the Bailey-Clutter model. This must be a named vector, with b0, b1 and b2 as parameter names. Default: c( b0=3, b1=-130, b2 = 1.5).
round_classes If TRUE, class values will be rounded to the nearest 5. Default TRUE.
* font Type of font used in the plot. Default: "serif".
* gray_scale If TRUE, the plot will be rendered in a gray scale. Default: "TRUE".
* output Type of output the function should return. This can either be "plot", for the guide curve plot, "table", for a data frame with the data used on the guide
curve plot, and full for a list with 2 ggplot2 objects, one for residual plot and other for plot curves, a lm object for the regression, a data frame with quality of
fit variables, the dominant height index, the class table used, and the table used for the guide curve plot. Default "plot".

#### Value
A data frame, a ggplot object, or a list, varying according to the "output" argument.
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
#### Examples
```{r}
data("exfm14")
exfm14
# To get a guide curve plot for this data, we simply need to input
# dominant height and age variables, age index, and number of classes to be used:

guide_curve(exfm14, "dh", "age", 72, 5)
# if we want to get the table used to get the plot, we can choose the output "table":
guide_curve(exfm14, "dh", "age", 72, 5, output = "table")
# Other models are available for use, such as Curtis, Chapman Richards, and Bailey:
# CR and BC models are non linear, and thus need start values. There are default values,
# but they may fail, depending on the data used, so it's recommended to try start values that
# are ideal for the data used:
guide_curve(exfm14, "dh", "age", 72, 5,
model = "Chapman-Richards", start_chap = c(b0=23, b1=0.03, b2 = 1.3))
# Or, to get more information on the analysis, such as #### Details on the regression,
# bias, rmse, plot for residuals and more (cpu taxing):
# do not run
# guide_curve(exfm14, "dh", "age", 72, 5, output = "full")
```





inv Calculate the inverse of a number
#### Description
This function returns the inverse of a numeric vector.
#### Usage
inv(x)
#### Arguments 
x A numeric vector
#### Details
This function is manly used when fitting statistical models. If one of the variables in a model is an
inverse of a vector, the lm function does not properly compute the variable, if 1/vector is inserted
directly in the model, leading to the need of creating a separate variable. This function allows the
user to get the inverse of a given numeric vector inside the model, without the need to create a new
variable.
Value
a numeric vector containing the inverse of x.
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
#### Examples
library(forestmangr)
data("exfm15")
head(exfm15)
# Get the inverse of a vector
inv(iris$Petal.Length)
# Fit a model that contains the inverse of a variable, without the need to
# create a new variable for the inverse:
lm(log(TH) ~ inv(DBH), exfm15 )
# or
lm_table(exfm15, log(TH) ~ inv(DBH) )


nls_table Fit non-linear regressions by group, using LM algorithm and get different
output options.
#### Description
With this function it’s possible to fit non-linear regressions using Levenberg-Marquardt or Gauss-
Newton algorithms by a grouping variable, and get a data frame with each column as a coefficient
and quality of fit variables, and other output options. Works with dplyr grouping functions.
#### Usage
nls_table(df, model, mod_start, .groups = NA, output = "table",
est.name = "est", replace = FALSE, keep_model = FALSE,
global_start, algorithm = "LM")
#### Arguments 
*``df``: A data frame.
model A linear regression model, with or without quotes. The variables mentioned in
the model must exist in the provided data frame. X and Y sides of the model
must be separated by "~".
mod_start A vector or data frame, with start values for coefficients used in the model. This
can be a data frame containing the same group variables used in the .groups
argument, and the start values.
* ``.groups``: Optional argument. Quoted name(s) of grouping variables used to fit multiple
regressions, one for each level of the provided variable(s). Default NA.
output Selects different output options. Can be either "table", "merge", "merge_est"
and "nest". See #### Details for explanations for each option. Default: "table".
est.name Name of the estimated y value. Used only if est.name = TRUE. Default: "est".
replace If TRUE, models that don’t converge on a grouped regression fit will be replaced
by coefficients fitted using all data. Default: FALSE.
keep_model If TRUE, a column containing lm object(s) is kept in the output. Useful if the user
desires to get more information on the regression.Default: FALSE.
global_start Optional argument. A vector or data frame, with start values for the global fit
regression used when "replace" is TRUE.
nls_table 43
algorithm Algorithm to be used in the non-linear regression. It can be "LM" (Levenberg-
Marquardt, more robust) or "GN" (Gauss-Newton, less robust, uses nls default
algorithm). Default: "LM".
#### Details
This function Levenberg-Marquardt algorithm as default for fitting non-linear regression models.
Also, with this function there no more need to use the do function when fitting a linear regression in
a pipe line. It’s also possible to easily make fit multiple regressions, specifying a grouping variable.
In addition to that, the default output sets each coefficient as a column, making it easy to call
coefficients by name or position when estimating values. The Levenberg-Marquardt fit uses nlsLM.
Value
A data frame. Different data frame options are available using the output argument.
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
#### Examples
library(forestmangr)
library(dplyr)
data("exfm14")
head(exfm14)
# Fit Chapman & Richards non-linear model for dominant Height:
nls_table(exfm14, dh ~ b0 * (1 - exp( -b1 * age ) )^b2,
mod_start = c( b0=23, b1=0.03, b2 = 1.3 ) )
# Fit CR model by strata:
nls_table(exfm14,dh ~ b0 * (1 - exp( -b1 * age ) )^b2,
mod_start = c( b0=23, b1=0.03, b2 = 1.3 ),
.groups = "strata") %>%
as.data.frame
# or, using group_by
exfm14 %>%
group_by(strata) %>%
nls_table(dh ~ b0 * (1 - exp( -b1 * age ) )^b2,
mod_start = c( b0=23, b1=0.03, b2 = 1.3 ) )
# If there are multiple start values, for each strata, they can be supplied like so:
tab_coef <- data.frame(strata = c(1:20, 24,25,27,28,30,31,33,35,36,37),
rbind(
data.frame(b0 = rep(23, 20), b1 = rep(0.03, 20), b2 = rep(1.3, 20) ),
data.frame(b0 = rep(23, 10), b1 = rep(0.03, 10), b2 = rep(.5, 10) )))
tab_coef
44 nls_table
nls_table(exfm14, dh ~ b0 * (1 - exp( -b1 * age ) )^b2,
mod_start = tab_coef,
.groups = "strata" )
# mod_start needs to be a data frame in this case.
# It's possible to bind the coefficients to the original data,
# to estimate y. We'll also estimate bias and rmse for this estimation:
nls_table(exfm14,dh ~ b0 * (1 - exp( -b1 * age ) )^b2,
mod_start = tab_coef ,
.groups = "strata",
replace = TRUE,
output = "merge" ) %>%
mutate(
dh_est = b0 * (1 - exp( -b1 * age ) )^b2,
bias = bias_per(y = dh, yhat = dh_est),
rmse = rmse_per(y = dh, yhat = dh_est) ) %>%
head(15)
# This can also be done directly using "merge_est" as output:
nls_table(exfm14,dh ~ b0 * (1 - exp( -b1 * age ) )^b2,
mod_start = tab_coef ,
.groups = "strata",
output = "merge_est",
est.name = "dh_est" ) %>%
mutate(
bias = bias_per(y = dh, yhat = dh_est),
rmse = rmse_per(y = dh, yhat = dh_est) ) %>%
head(15)
# It's possible to further customize the output, using nested columns:
nls_table(exfm14,dh ~ b0 * (1 - exp( -b1 * age ) )^b2,
mod_start = tab_coef ,
.groups = "strata",
output = "nest" )
# It's possible to use Gauss-Newton's algorithm. In this case,
# some regressions will not converge.
exfm14 %>%
group_by(strata) %>%
nls_table(dh ~ b0 * (1 - exp( -b1 * age ) )^b2,
mod_start = c( b0=23, b1=0.03, b2 = 1.3 ),algorithm="GN" )
# If some regressions don't converge, it's possible to fill those NAs with
# regression coefficients from a general fit, using the entire data:
nls_table(exfm14,dh ~ b0 * (1 - exp( -b1 * age ) )^b2,
mod_start = c( b0=23, b1=0.03, b2 = 1.3 ),
.groups = "strata",
replace = TRUE,
algorithm="GN" )
plot_summarise 45
plot_summarise Summarize forest inventory data
#### Description
Get informations about forest inventory plots, like number of individuals, mean DBH, q, Height,
basal area, volume, etc.
#### Usage
plot_summarise(df, plot, plot_area, dbh, th, .groups, total_area, vwb,
vwob, dh, age, dec_places = 4)
#### Arguments 
*``df``: A data frame.
* `` plot``:  Quoted name of the plot variable. used to differentiate the data’s plots. If this
argument is missing, the defined groups in the data frame will be used, If there
are no groups in the data, the function will fail.
* `` plot_area``:  Quoted name of the plot area variable, or a numeric vector with the plot area
value. The plot area value must be in square meters.
dbh Optional parameter. Quoted name of the diameter at breast height variable. If
supplied, will be used to calculate the mean diameter per plot, quadratic diameter
(q), basal area and basal area per hectare. Default NA.
th Optional parameter. Quoted name of the total height variable. If supplied, will
be used to calculate the mean total height, and the dominant height variable, if
the dh is NA. Default NA.
* ``.groups``: Optional argument. Quoted name(s) of grouping variables that can be added to
differentiate subdivisions of the data. Default: NA.
total_area Optional argument. Quoted name of the total area variable, or a numeric vector
with the total area value. The total area value must be in hectares. Default: NA.
vwb Optional parameter. Quoted name of the volume with bark variable. If supplied,
will be used to calculate the total vwb per plot, and vwb per hectare per plot.
Default NA.
vwob Optional parameter. Quoted name of the volume without bark variable. If supplied,
will be used to calculate the total vwob per plot, and vwob per hectare per
plot. Default NA.
dh Optional parameter. Quoted name of the dominant height variable. If supplied,
will be used to calculate the mean dominant height per plot. If not, the ht
variable supplied will be used to calculate the average of the top two trees of
each plot, and use that as dh. Default: NA.
age Optional parameter. Quoted name of the age variable. If supplied, will be used
to calculate the average age per plot. Default: NA.
dec_places Numeric value for the number of decimal places to be used in the output tables.
Default: 4.
46 plot_summarise
Value
A data frame with informations per plot.
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
#### Examples
library(forestmangr)
data("exfm21")
head(exfm21)
# Obligatory #### Arguments . Basic informations about the plot.
plot_summarise(exfm21, "PLOT", 810)
# Area values can be numeric, or a variable name
plot_summarise(exfm21, "PLOT", "PLOT_AREA")
# With DBH supplied, we get the mean diameter, quadratic diameter,
# basal area and basal area per hectare:
plot_summarise(exfm21, "PLOT", "PLOT_AREA", "DBH")
# With TH supplied, we get the mean total height and dominant height
plot_summarise(exfm21, "PLOT", "PLOT_AREA", "DBH", "TH_EST")
# With strata supplied, we divide the data into 2 strata
plot_summarise(exfm21, "PLOT", "PLOT_AREA", "DBH", "TH_EST", "STRATA")
# The strata area can also be supplied
plot_summarise(exfm21, "PLOT", "PLOT_AREA", "DBH", "TH_EST", "STRATA", "* ``STRATA_AREA``:  ")
# With VWB supplied, we get the total vwb, and vwb per hectare
plot_summarise(exfm21, "PLOT", "PLOT_AREA", "DBH", "TH_EST", "STRATA", "* ``STRATA_AREA``:  ",
"VWB")
# With VWOB supplied, we get the total vwob, and vwob per hectare
plot_summarise(exfm21, "PLOT", "PLOT_AREA", "DBH", "TH_EST", "STRATA", "* ``STRATA_AREA``:  ",
"VWB", "VWOB")
# If the data already has a dominant height variable, it can also be supplied here
plot_summarise(exfm21, "PLOT", "PLOT_AREA", "DBH", "TH_EST", "STRATA", "* ``STRATA_AREA``:  ",
"VWB", "VWOB", "DH")
# With the AGE variable supplied, we get the average age of each plot
plot_summarise(exfm21, "PLOT", "PLOT_AREA", "DBH", "TH_EST", "STRATA", "* ``STRATA_AREA``:  ",
"VWB", "VWOB", "DH", "AGE")









vertical_stratum Divide data into 3 vertical strata
#### Description
Get the vertical strata of data based on the height variable. The data will be divided into inferior,
medium and superior strata.
#### Usage
vertical_stratum(df, th)
#### Arguments 
*``df``: A data frame.
th Quoted name of the total height variable.
Value
a data frame.
Author(s)
Eric Bastos Gorgens <e.gorgens@gmail.com>
#### References
Souza, A. L. and Soares, C. P. B. (2013) Florestas Nativas: estrutura, dinamica e manejo. Vicosa:
UFV.
66 vol_summarise
#### Examples
library(forestmangr)
data(exfm10)
# To classify the data, supply the data frame and the height variable name:
vertical_stratum(exfm10, "TH" )
vol_summarise Summarize volume of trees
#### Description
This function can be used to summarize volume with and without bark of trees in a data frame.
#### Usage
vol_summarise(df, dbh, th, vwb, tree, .groups = NA, vwob = NA)
#### Arguments 
*``df``: A data frame.
* ``dbh``: Quoted nameof the diameter at breast height variable, in cm.
th Quoted name of the total height variable, in meters.
vwb Quoted name of the volume with bark variable, in cubic meters.
tree Quoted name of the tree variable. used to differentiate the trees’ sections. If this
argument is NA, the defined groups in the data frame will be used. Default: NA.
* ``.groups``: Optional argument. Quoted name(s) of additional grouping variables that can be
added to differentiate subdivisions of the data.
vwob Optional argument. Quoted name of the volume without bark variable, in cubic
meters. Default: NA. If this argument is NA, the defined groups in the data frame
will be used. Default: NA.
Value
A data frame summarized by the .groups variable(s).
Author(s)
Sollano Rabelo Braga <sollanorb@gmail.com>
See Also
Complementary functions: smalianwb, For calculation of volume with bark using the Smalian
method, smalianwob, For calculation of volume without bark using the Smalian method, huberwb,
for calculation of volume with bark using the Huber method, huberwob, for calculation of volume
without bark the Huber method.
%>% 67
#### Examples
library(forestmangr)
data("exfm7")
head(exfm7)
# In order to calculate the volume of each tree, first we
# Calculate the volume by tree section using the Smalian method:
sec_data_vol <- exfm7 %>%
smalianwb("di_wb", "hi", "TREE") %>%
smalianwob("di_wb", "hi", "bark_t", "TREE", bt_mm_to_cm = TRUE)
sec_data_vol
# Now, we summarize the tree's volume:
vol_summarise(sec_data_vol, dbh = "DBH", th = "TH", vwb = "VWB",
tree = "TREE", .groups = "STRATA",vwob = "VWOB")
# It's possible to do everything using pipes:
exfm7 %>%
smalianwb("di_wb", "hi", "TREE") %>%
smalianwob("di_wb", "hi", "bark_t", "TREE", bt_mm_to_cm = TRUE) %>%
vol_summarise("DBH", "TH", "VWB", "TREE", "STRATA", "VWOB")
%>% Pipe
#### Description
Pipe an object forward into a function or call expression. See magrittr for more #### Details.
See quasiquotation for more #### Details.
%T>% Tee
#### Description
Pipe an object forward into a function or call expression. See magrittr for more #### Details.
